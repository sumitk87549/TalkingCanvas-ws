<div class="admin-container">
    <div class="header">
        <h2>{{ isEditMode ? 'Edit Painting' : 'Add New Painting' }}</h2>
        <a routerLink="/admin" class="back-link">‚Üê Back to Dashboard</a>
    </div>

    <div *ngIf="error" class="error-message">
        {{ error }}
    </div>

    <form [formGroup]="paintingForm" (ngSubmit)="onSubmit()" class="painting-form">
        <div class="form-section">
            <h3>Basic Information</h3>

            <div class="form-group">
                <label for="title">Title *</label>
                <input id="title" type="text" formControlName="title" placeholder="Painting Title">
            </div>

            <div class="form-group">
                <label for="artistName">Artist Name</label>
                <input id="artistName" type="text" formControlName="artistName" placeholder="Artist Name">
            </div>

            <div class="form-group">
                <label for="categories">Categories</label>
                <select id="categories" formControlName="categoryIds" multiple class="form-control"
                    style="height: 100px;">
                    <option *ngFor="let category of categories" [value]="category.id">{{ category.name }}</option>
                </select>
                <small class="help-text">Hold Ctrl/Cmd to select multiple</small>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="price">Price *</label>
                    <input id="price" type="number" formControlName="price" placeholder="0.00">
                </div>
                <div class="form-group">
                    <label for="currency">Currency</label>
                    <select id="currency" formControlName="currency">
                        <option value="INR">INR</option>
                        <option value="USD">USD</option>
                        <option value="EUR">EUR</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="form-section">
            <h3>Dimensions & Medium</h3>
            <div class="form-row">
                <div class="form-group">
                    <label for="height">Height (cm) *</label>
                    <input id="height" type="number" formControlName="height">
                </div>
                <div class="form-group">
                    <label for="width">Width (cm) *</label>
                    <input id="width" type="number" formControlName="width">
                </div>
                <div class="form-group">
                    <label for="depth">Depth (cm)</label>
                    <input id="depth" type="number" formControlName="depth">
                </div>
            </div>

            <div class="form-group">
                <label for="medium">Medium *</label>
                <input id="medium" type="text" formControlName="medium" placeholder="e.g., Oil on Canvas">
            </div>

            <div class="form-group">
                <label for="yearCreated">Year Created</label>
                <input id="yearCreated" type="number" formControlName="yearCreated">
            </div>
        </div>

        <div class="form-section">
            <h3>Details</h3>
            <div class="form-group">
                <label for="description">Description</label>
                <textarea id="description" formControlName="description" rows="4"></textarea>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="stockQuantity">Stock Quantity *</label>
                    <input id="stockQuantity" type="number" formControlName="stockQuantity">
                </div>
                <div class="form-group checkbox-group">
                    <label>
                        <input type="checkbox" formControlName="isAvailable">
                        Available for Sale
                    </label>
                </div>
            </div>

            <div class="form-group checkbox-group">
                <label>
                    <input type="checkbox" formControlName="adminRecommendation">
                    Admin Recommendation
                </label>
            </div>

            <div class="form-group" *ngIf="paintingForm.get('adminRecommendation')?.value">
                <label for="recommendationText">Recommendation Text</label>
                <textarea id="recommendationText" formControlName="recommendationText" rows="2"></textarea>
            </div>
        </div>

        <div class="form-section">
            <h3>Images</h3>
            <div class="form-group">
                <label for="images">Upload Images</label>
                <input id="images" type="file" multiple (change)="onFileSelected($event)" accept="image/*">
                <p class="help-text">Select multiple files to upload.</p>
            </div>
        </div>

        <div class="form-actions">
            <button type="button" routerLink="/admin" class="cancel-btn">Cancel</button>
            <button type="submit" [disabled]="paintingForm.invalid || loading" class="submit-btn">
                {{ loading ? 'Saving...' : (isEditMode ? 'Update Painting' : 'Create Painting') }}
            </button>
        </div>
    </form>
</div>