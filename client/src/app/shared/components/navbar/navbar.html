<header class="navbar-container" [ngClass]="navbarClasses">
  <nav class="navbar">
    <a class="logo" routerLink="/">TalkingCanvas</a>

    <!-- Mobile Menu Toggle Button -->
    <button class="mobile-menu-toggle" (click)="toggleMobileMenu()" [class.active]="isMobileMenuOpen"
      aria-label="Toggle navigation">
      <span class="bar"></span>
      <span class="bar"></span>
      <span class="bar"></span>
    </button>

    <!-- Navigation Links -->
    <ul class="nav-links" [class.active]="isMobileMenuOpen">
      <!-- Guest View -->
      <ng-container *ngIf="!authService.isLoggedIn()">
        <li><a routerLink="paintings" (click)="closeMobileMenu()">Gallery</a></li>
        <li><a routerLink="about" (click)="closeMobileMenu()">About</a></li>
        <li><a routerLink="contact" (click)="closeMobileMenu()">Contact</a></li>
        <li><a routerLink="register" (click)="closeMobileMenu()">Signup</a></li>
        <li><a routerLink="login" (click)="closeMobileMenu()">Login</a></li>
      </ng-container>

      <!-- Logged In View -->
      <ng-container *ngIf="authService.isLoggedIn()">
        <!-- Mobile Only Links for Logged In User -->
        <li class="mobile-only-link">
          <div class="user-info">
            <span class="user-emoji-circle-mobile">{{ currentUser?.profileEmoji || 'ðŸ˜Š' }}</span>
            <span class="welcome-text">Welcome, {{currentUser?.name}}</span>
          </div>
        </li>

        <li><a routerLink="cart" (click)="closeMobileMenu()">Cart ({{cartItemCount}})</a></li>
        <li><a routerLink="paintings" (click)="closeMobileMenu()">Gallery</a></li>
        <li><a routerLink="about" (click)="closeMobileMenu()">About</a></li>
        <li><a routerLink="contact" (click)="closeMobileMenu()">Contact</a></li>

        <li *ngIf="isAdmin"><a routerLink="/admin" (click)="closeMobileMenu()">Dashboard</a></li>

        <!-- Mobile Only Profile Link -->
        <li class="mobile-only-link"><a routerLink="/profile" (click)="closeMobileMenu()">My Profile</a></li>

        <!-- Desktop Dropdown (Hidden on Mobile) -->
        <li class="dropdown desktop-only-dropdown">
          <span class="dropbtn">
            <span class="user-emoji-circle">{{ currentUser?.profileEmoji || 'ðŸ˜Š' }}</span>
            {{ isAdmin ? 'ADMIN' : 'Welcome' }} <br> {{currentUser?.name | uppercase}} <i class="arrow-down"></i>
          </span>
          <div class="dropdown-content">
            <a routerLink="/profile"><i class="fas fa-user"></i> My Profile</a>
            <div class="dropdown-divider"></div>
            <a routerLink="/logout"><i class="fas fa-sign-out-alt"></i> Logout</a>
          </div>
        </li>

        <!-- Mobile Logout -->
        <li class="mobile-only-link"><a routerLink="/logout" (click)="closeMobileMenu()">Logout</a></li>
      </ng-container>
    </ul>
  </nav>
</header>